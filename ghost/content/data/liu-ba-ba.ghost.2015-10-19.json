{"meta":{"exported_on":1445227933631,"version":"003"},"data":{"app_fields":[],"app_settings":[],"apps":[],"permissions":[{"id":1,"uuid":"3f8aaa87-71f9-4191-bb89-5dd79a59b7e5","name":"Export database","object_type":"db","action_type":"exportContent","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":2,"uuid":"7949ba3b-2c65-425a-98cc-90678407d2f4","name":"Import database","object_type":"db","action_type":"importContent","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":3,"uuid":"8d88b0cf-6182-4dd0-9016-b490f6485892","name":"Delete all content","object_type":"db","action_type":"deleteAllContent","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":4,"uuid":"f921dd89-49a8-4be9-8f31-4bfa55c84d4e","name":"Send mail","object_type":"mail","action_type":"send","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":5,"uuid":"c87afc23-d504-4031-ba34-0f1a1e679204","name":"Browse notifications","object_type":"notification","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":6,"uuid":"266dbf2e-db82-4c57-bf7d-1fcf02172784","name":"Add notifications","object_type":"notification","action_type":"add","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":7,"uuid":"9d560380-7a87-43a1-8bbd-ac86c9f8adc7","name":"Delete notifications","object_type":"notification","action_type":"destroy","object_id":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":8,"uuid":"6721308c-4743-43cc-aba3-2c0296423822","name":"Browse posts","object_type":"post","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":9,"uuid":"ab2f9b26-cd06-4d06-9359-b6ecbb20fb5a","name":"Read posts","object_type":"post","action_type":"read","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":10,"uuid":"0c338477-974a-40c4-9588-4b2b7019b74d","name":"Edit posts","object_type":"post","action_type":"edit","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":11,"uuid":"3a20ce5e-3e4a-42d1-9c25-5200c332ee0b","name":"Add posts","object_type":"post","action_type":"add","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":12,"uuid":"329723b1-24c0-45c7-8e24-59adec4d9e1b","name":"Delete posts","object_type":"post","action_type":"destroy","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":13,"uuid":"71364cfc-68f4-430c-b801-2547e29b1049","name":"Browse settings","object_type":"setting","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":14,"uuid":"ba9836cf-5380-4f78-b2e8-82a9ff48ad90","name":"Read settings","object_type":"setting","action_type":"read","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":15,"uuid":"92634e5e-44a8-4493-8ffc-1ccff8cc3071","name":"Edit settings","object_type":"setting","action_type":"edit","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":16,"uuid":"99f3b8d3-2ce5-47ed-a79c-855211754677","name":"Generate slugs","object_type":"slug","action_type":"generate","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":17,"uuid":"f407de66-524d-4fba-b97f-43d2fe29c025","name":"Browse tags","object_type":"tag","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":18,"uuid":"26a9515d-9584-4dd8-ae2c-4a11b31b169d","name":"Read tags","object_type":"tag","action_type":"read","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":19,"uuid":"c911e05f-6017-4354-8304-e69cea1610b7","name":"Edit tags","object_type":"tag","action_type":"edit","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":20,"uuid":"d4f486b4-fb5b-465b-b48f-829b1123a43a","name":"Add tags","object_type":"tag","action_type":"add","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":21,"uuid":"2d431f98-71b9-49a9-b28d-218f5e0cbf11","name":"Delete tags","object_type":"tag","action_type":"destroy","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":22,"uuid":"24fad627-bddf-492f-9fa1-646a6d786b4a","name":"Browse themes","object_type":"theme","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":23,"uuid":"e14f35bd-1df3-4fc3-a83c-dd648cf5d131","name":"Edit themes","object_type":"theme","action_type":"edit","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":24,"uuid":"75bc1a9a-8026-4e51-8f74-518cd336c414","name":"Browse users","object_type":"user","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":25,"uuid":"89926879-6df5-4cb0-84a8-1ce62146a3fa","name":"Read users","object_type":"user","action_type":"read","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":26,"uuid":"7472698f-3dfd-409b-8936-5eb54b97b79f","name":"Edit users","object_type":"user","action_type":"edit","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":27,"uuid":"df2438d4-cfa4-4016-a865-7cea06455106","name":"Add users","object_type":"user","action_type":"add","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":28,"uuid":"d8c4ca58-87a3-4b96-a9f1-4add360c6393","name":"Delete users","object_type":"user","action_type":"destroy","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":29,"uuid":"05fedddb-240f-4409-8f05-4ea6cc2fd8ce","name":"Assign a role","object_type":"role","action_type":"assign","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1},{"id":30,"uuid":"a041fe5c-e5b1-412b-b2eb-f0648166a5d6","name":"Browse roles","object_type":"role","action_type":"browse","object_id":null,"created_at":"2015-10-14T10:22:05.000Z","created_by":1,"updated_at":"2015-10-14T10:22:05.000Z","updated_by":1}],"permissions_apps":[],"permissions_roles":[{"id":1,"role_id":1,"permission_id":1},{"id":2,"role_id":1,"permission_id":2},{"id":3,"role_id":1,"permission_id":3},{"id":4,"role_id":1,"permission_id":4},{"id":5,"role_id":1,"permission_id":5},{"id":6,"role_id":1,"permission_id":6},{"id":7,"role_id":1,"permission_id":7},{"id":8,"role_id":1,"permission_id":8},{"id":9,"role_id":1,"permission_id":9},{"id":10,"role_id":1,"permission_id":10},{"id":11,"role_id":1,"permission_id":11},{"id":12,"role_id":1,"permission_id":12},{"id":13,"role_id":1,"permission_id":13},{"id":14,"role_id":1,"permission_id":14},{"id":15,"role_id":1,"permission_id":15},{"id":16,"role_id":1,"permission_id":16},{"id":17,"role_id":1,"permission_id":17},{"id":18,"role_id":1,"permission_id":18},{"id":19,"role_id":1,"permission_id":19},{"id":20,"role_id":1,"permission_id":20},{"id":21,"role_id":1,"permission_id":21},{"id":22,"role_id":1,"permission_id":22},{"id":23,"role_id":1,"permission_id":23},{"id":24,"role_id":1,"permission_id":24},{"id":25,"role_id":1,"permission_id":25},{"id":26,"role_id":1,"permission_id":26},{"id":27,"role_id":1,"permission_id":27},{"id":28,"role_id":1,"permission_id":28},{"id":29,"role_id":1,"permission_id":29},{"id":30,"role_id":1,"permission_id":30},{"id":31,"role_id":2,"permission_id":8},{"id":32,"role_id":2,"permission_id":9},{"id":33,"role_id":2,"permission_id":10},{"id":34,"role_id":2,"permission_id":11},{"id":35,"role_id":2,"permission_id":12},{"id":36,"role_id":2,"permission_id":13},{"id":37,"role_id":2,"permission_id":14},{"id":38,"role_id":2,"permission_id":16},{"id":39,"role_id":2,"permission_id":17},{"id":40,"role_id":2,"permission_id":18},{"id":41,"role_id":2,"permission_id":19},{"id":42,"role_id":2,"permission_id":20},{"id":43,"role_id":2,"permission_id":21},{"id":44,"role_id":2,"permission_id":24},{"id":45,"role_id":2,"permission_id":25},{"id":46,"role_id":2,"permission_id":26},{"id":47,"role_id":2,"permission_id":27},{"id":48,"role_id":2,"permission_id":28},{"id":49,"role_id":2,"permission_id":29},{"id":50,"role_id":2,"permission_id":30},{"id":51,"role_id":3,"permission_id":8},{"id":52,"role_id":3,"permission_id":9},{"id":53,"role_id":3,"permission_id":11},{"id":54,"role_id":3,"permission_id":13},{"id":55,"role_id":3,"permission_id":14},{"id":56,"role_id":3,"permission_id":16},{"id":57,"role_id":3,"permission_id":17},{"id":58,"role_id":3,"permission_id":18},{"id":59,"role_id":3,"permission_id":20},{"id":60,"role_id":3,"permission_id":24},{"id":61,"role_id":3,"permission_id":25},{"id":62,"role_id":3,"permission_id":30}],"permissions_users":[],"posts":[{"id":1,"uuid":"9424787b-0fe5-4904-8977-b3368d8ef771","title":"欢迎使用 Ghost 博客系统","slug":"welcome-to-ghost","markdown":"Yeah，博客上线了！这篇文章的目的是向你介绍 Ghost 编辑器并帮你快速上手。通过 `<your blog URL>/ghost/` 链接就可以登录系统后台管理你的博客内容了。当你进入后台，你就能看到左侧文章列表处列出的这篇文章，右侧就是这篇文章的预览效果。点击预览栏右上角的铅笔图标就能进入内容编辑页面。 \r\n\r\n## 快速入门\r\n\r\nGhost 使用 Markdown 语法书写内容。简单来说，Markdown 就是一种简化的书写格式！\r\n\r\n用 Markdown 语法写作是很容易的。在编辑界面的左侧就是你写作的地方。在你认为需要的时候，可以使用以下这些语法来格式化你的内容。例如下面这个无序列表：\r\n\r\n* Item number one\r\n* Item number two\r\n    * A nested item\r\n* A final item\r\n\r\n还可以是有序列表：\r\n\r\n1. Remember to buy some milk\r\n2. Drink the milk\r\n3. Tweet that I remembered to buy the milk, and drank it\r\n\r\n### 链接\r\n\r\n如果要链接其它页面，可以直接把页面的 URL 粘贴过来，例如 http://www.ghostchina.com - 会被自动识别为链接。但是，如果你想自定义链接文本，可以像这样： [Ghost 中文网](http://www.ghostchina.com)。很简单吧！\r\n\r\n### 图片\r\n\r\n插入图片也没问题！前提是你事先知道图片的 URL，然后像下面这样：\r\n\r\n![The Ghost Logo](http://static.ghostchina.com/image/3/fe/34a9831916be9db1381ecb320491e.png)\r\n\r\n如果图片在本地的硬盘里怎么办？也很简单！像下面这样书写就能为图片预留一个位置，然后你可以继续写作，回头再通过拖拽的方式把图片上传到服务器上。\r\n\r\n![一张图片]\r\n\r\n\r\n### 引用\r\n\r\n有些时候我们需要引用别人说的话，可以这样：\r\n\r\n> Wisdomous - it's definitely a word.\r\n\r\n### 代码\r\n\r\n或许你是个码农，需要贴一些代码到文章里，可以通过两个引号（Tab 键上面的那个键）加入行内代码 `<code>`。如果需要加入大段的代码，可以在代码前加 4 个空格缩进，这就是 Markdown 的语法。\r\n\r\n    .awesome-thing {\r\n        display: block;\r\n        width: 100%;\r\n    }\r\n\r\n### 分割线\r\n\r\n在任一新行输入 3 个或更多的短横线（减号）就是一条分隔线了。\r\n\r\n---\r\n\r\n### 高级用法\r\n\r\nMarkdown 还有一个特别用法，就是在你需要的时候可以直接书写 HTML 代码。\r\n\r\n<input type=\"text\" placeholder=\"这是个输入框！\" />\r\n\r\n只要掌握了上面的这些介绍，你就已经入门了！继续写作吧！","html":"<p>Yeah，博客上线了！这篇文章的目的是向你介绍 Ghost 编辑器并帮你快速上手。通过 <code>&lt;your blog URL&gt;/ghost/</code> 链接就可以登录系统后台管理你的博客内容了。当你进入后台，你就能看到左侧文章列表处列出的这篇文章，右侧就是这篇文章的预览效果。点击预览栏右上角的铅笔图标就能进入内容编辑页面。 </p>\n\n<h2 id=\"\">快速入门</h2>\n\n<p>Ghost 使用 Markdown 语法书写内容。简单来说，Markdown 就是一种简化的书写格式！</p>\n\n<p>用 Markdown 语法写作是很容易的。在编辑界面的左侧就是你写作的地方。在你认为需要的时候，可以使用以下这些语法来格式化你的内容。例如下面这个无序列表：</p>\n\n<ul>\n<li>Item number one</li>\n<li>Item number two\n<ul><li>A nested item</li></ul></li>\n<li>A final item</li>\n</ul>\n\n<p>还可以是有序列表：</p>\n\n<ol>\n<li>Remember to buy some milk  </li>\n<li>Drink the milk  </li>\n<li>Tweet that I remembered to buy the milk, and drank it</li>\n</ol>\n\n<h3 id=\"\">链接</h3>\n\n<p>如果要链接其它页面，可以直接把页面的 URL 粘贴过来，例如 <a href=\"http://www.ghostchina.com\">http://www.ghostchina.com</a> - 会被自动识别为链接。但是，如果你想自定义链接文本，可以像这样： <a href=\"http://www.ghostchina.com\">Ghost 中文网</a>。很简单吧！</p>\n\n<h3 id=\"\">图片</h3>\n\n<p>插入图片也没问题！前提是你事先知道图片的 URL，然后像下面这样：</p>\n\n<p><img src=\"http://static.ghostchina.com/image/3/fe/34a9831916be9db1381ecb320491e.png\" alt=\"The Ghost Logo\" /></p>\n\n<p>如果图片在本地的硬盘里怎么办？也很简单！像下面这样书写就能为图片预留一个位置，然后你可以继续写作，回头再通过拖拽的方式把图片上传到服务器上。</p>\n\n<h3 id=\"\">引用</h3>\n\n<p>有些时候我们需要引用别人说的话，可以这样：</p>\n\n<blockquote>\n  <p>Wisdomous - it's definitely a word.</p>\n</blockquote>\n\n<h3 id=\"\">代码</h3>\n\n<p>或许你是个码农，需要贴一些代码到文章里，可以通过两个引号（Tab 键上面的那个键）加入行内代码 <code>&lt;code&gt;</code>。如果需要加入大段的代码，可以在代码前加 4 个空格缩进，这就是 Markdown 的语法。</p>\n\n<pre><code>.awesome-thing {\n    display: block;\n    width: 100%;\n}\n</code></pre>\n\n<h3 id=\"\">分割线</h3>\n\n<p>在任一新行输入 3 个或更多的短横线（减号）就是一条分隔线了。</p>\n\n<hr />\n\n<h3 id=\"\">高级用法</h3>\n\n<p>Markdown 还有一个特别用法，就是在你需要的时候可以直接书写 HTML 代码。</p>\n\n<p><input type=\"text\" placeholder=\"这是个输入框！\" /></p>\n\n<p>只要掌握了上面的这些介绍，你就已经入门了！继续写作吧！</p>","image":null,"featured":0,"page":0,"status":"published","language":"zh_CN","meta_title":null,"meta_description":null,"author_id":1,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1,"published_at":"2015-10-14T10:22:04.000Z","published_by":1},{"id":2,"uuid":"3175e4e1-4295-40dd-9336-f433fd3131c3","title":"博客第一篇：记录这个网站的诞生过程","slug":"myfirstblog","markdown":"<blockquote>\n  <p>这是本博客的第一篇文章，我决定用来记录这个网站的诞生过程(即如何在阿里云服务器ECS_Ubuntu系统上安装Ghost博客)。一来可以把这个难忘的建站经历记录下来，二来也可以总结一些成功的经验供未来通过搜索引擎找到这儿的网友一些帮助。文章比较细，遇到你熟悉的部分可以跳过不看。嗯，开始吧。。。</p>\n</blockquote>\n<hr />\n<h1 id=\"1\">1. 购买域名</h1>\n\n<p>域名就是网址。比如我这个网站的域名就是  <code>daddyliu.com</code> 。<a href=\"http://www.godaddy.com\" target=\"_blank\">Godaddy</a> 是全球最大的域名供应商，所以我在Godaddy(网友亲切称其为“狗爹”)购买了域名。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-11-41-53.png\"\" /></p>\n<p>首页中大大的输入框(<em>Enter a domain name</em>)里面就可以输入你想要注册的域名，然后godaddy会告诉你这个有没有被注册。如果被注册了，godaddy会建议你使用其他后缀名比如<code>.net</code> <code>.org</code> <code>.me</code> ...</p>\n\n<h4 id=\"tips\"><em>*tips:</em></h4>\n\n<blockquote>\n  <p><em>Godaddy可以使用支付宝支付，只要把顶部货币栏切换到CNY即可。</em></p>\n</blockquote>\n\n<p>购买完成之后，进入你的 <strong>My Account</strong>，点击<strong>Domains</strong>，点击<strong>Launch</strong>.</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-12-02-26.png\" alt=\"\" /></p>\n\n<p>然后你会进入到域名的配置页面。在这里我们需要把域名和我们的服务器绑定起来。其实很简单，就一句话，把域名绑定到服务器的<code>IP地址</code>即可。这个过程，就是传说中的<strong>解析</strong>。</p>\n\n<p>怎么解析呢？\n请看下图：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-18-02-40.png\" alt=\"\" /></p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-18-03-25.png\" alt=\"\" /></p>\n\n<p>点击编辑，在 <strong>Points to</strong> 一栏中填入服务器的IP地址即可。这里的 <strong>Host</strong> 其实就是前缀。这里普及两个名词: <strong>顶级域名</strong> 和 <strong>二级域名</strong> 。我们平常所知道的所谓的so-called正确网址是<code>www.XXX.xxx</code>。其实不然，\n我们只要输入<code>XXX.xxx</code>就可以了，不需要输入前面的www。www只是一个前缀。<code>www.XXX.xxx</code>就是一个<strong>二级域名</strong>，类似的还有<code>mail.qq.com</code>、<code>open.weibo.com</code> 等。而<strong>顶级域名</strong>就是<code>XXX.xxx</code> ，比如<code>baidu.com</code>、<code>qq.com</code>。所以我们在解析的时候第一栏的<strong>Host Name</strong>就只是个前缀。<strong>顶级域名</strong>一般用<code>@</code>表示。</p>\n\n<p>域名配置好了，接下来我们就要去配置服务器(本文以阿里云服务器为例)了。</p>\n\n<p>由于笔者用的是Mac，所以我只能用Mac上的方法来写这篇博文。但Windows用户也不用害怕，流程是对的，只是有些环节的手段不太一样。如果遇到不懂的，请善用搜索引擎，俗称<strong>黄金法则</strong>。</p>\n\n<hr />\n\n<h1 id=\"2\">2. 配置服务器</h1>\n\n<p>首先启动<strong>终端terminal</strong>（Mac上开启一个文件或者一个应用的最快方法：control + 空格，呼出spotlight，输入想要的文件或应用的名称，如terminal，回车）。</p>\n\n<p>输入命令行：<code>ssh root@你的IP地址</code>  ，回车。输入服务器密码。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-15-29-45.png\" alt=\"\" /></p>\n\n<p>这段命令的作用是请求连接服务器。出现如下界面表示连接成功。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-15-31-13.png\" alt=\"\" /></p>\n\n<h3 id=\"21nodejs\">2.1 安装Node.js</h3>\n\n<p>依次执行以下指令：</p>\n\n<pre><code>sudo apt-get update  \nsudo apt-get install -y python-software-properties python g++ make  \nsudo apt-get install software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js  \nsudo apt-get update  \nsudo apt-get install nodejs  \n</code></pre>\n\n<p>确认是否安装成功:</p>\n\n<pre><code>node -v  \n</code></pre>\n\n<pre><code>v0.10.37  \n</code></pre>\n\n<pre><code>npm -v  \n</code></pre>\n\n<pre><code>1.4.28  \n</code></pre>\n\n<h3 id=\"22nginx\">2.2 安装Nginx</h3>\n\n<p>执行以下指令：</p>\n\n<pre><code>sudo apt-get install nginx  \n</code></pre>\n\n<h3 id=\"23mysql\">2.3 安装MySQL</h3>\n\n<p>Ghost 默认采用 Sqlite3 数据库，但是我还是建议用 MySQL，避免将来由于数据多、访问量多而导致性能下降。</p>\n\n<p>执行如下指令开始安装 MySQL 吧：</p>\n\n<pre><code>sudo apt-get install mysql-server mysql-client  \n</code></pre>\n\n<p>安装过程中，系统会提示你给 <code>root</code> 用户（这里的 root 是 MySQL 数据库的管理账号） 设置个密码，建议设置的复杂些，更加安全些。如下图：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-27-05.png\" alt=\"\" /></p>\n\n<p>MySQL 安装成功后，我们执行以下指令进一步加强 MySQL 的安全设置：  </p>\n\n<pre><code>sudo mysql_secure_installation  \n</code></pre>\n\n<p>此工具所做的增强安全设置包括：移除所有匿名账户、限制远程 root 账户登录、删除 test 数据库等。下面列出详细设置：</p>\n\n<pre><code>NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL  \n      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!\n\nIn order to log into MySQL to secure it, we'll need the current  \npassword for the root user.  If you've just installed MySQL, and  \nyou haven't set the root password yet, the password will be blank,  \nso you should just press enter here.\n\n//输入安装 MySQL 时为 root 账户设置的密码\nEnter current password for root (enter for none):  \nOK, successfully used password, moving on...\n\nSetting the root password ensures that nobody can log into the MySQL  \nroot user without the proper authorisation.\n\nYou already have a root password set, so you can safely answer 'n'.\n\n//是否修改 root 账户的密码？前面设置过 root 账户的密码了，如果不打算修改密码的话，输入 'n'\nChange the root password? [Y/n] n  \n ... skipping.\n\nBy default, a MySQL installation has an anonymous user, allowing anyone  \nto log into MySQL without having to have a user account created for  \nthem.  This is intended only for testing, and to make the installation  \ngo a bit smoother.  You should remove them before moving into a  \nproduction environment.\n\n//是否删除匿名用户？\nRemove anonymous users? [Y/n] y  \n ... Success!\n\nNormally, root should only be allowed to connect from 'localhost'.  This  \nensures that someone cannot guess at the root password from the network.\n\n//是否禁止 root 账户远程登录？\nDisallow root login remotely? [Y/n] y  \n ... Success!\n\nBy default, MySQL comes with a database named 'test' that anyone can  \naccess.  This is also intended only for testing, and should be removed  \nbefore moving into a production environment.\n\n//是否删除 MySQL 默认创建的 test 数据库，并删除所有对 test 数据库的权限设置？\nRemove test database and access to it? [Y/n] y  \n - Dropping test database...\n ... Success!\n - Removing privileges on test database...\n ... Success!\n\nReloading the privilege tables will ensure that all changes made so far  \nwill take effect immediately.\n\n//是否重新加载权限表？\nReload privilege tables now? [Y/n] y  \n ... Success!\n\nCleaning up...\n\n\n\nAll done!  If you've completed all of the above steps, your MySQL  \ninstallation should now be secure.\n\nThanks for using MySQL!  \n</code></pre>\n\n<p>OK！MySQL 到此就安装好了！</p>\n\n<p>下面，我们为为 MySQL 设置默认字符集。将数据库、htnl页面、源码文件都设置为统一的字符集会减少很多麻烦，当然，utf8 是最好的选择。</p>\n\n<p>执行如下命令：</p>\n\n<pre><code>cd /etc/mysql  \n</code></pre>\n\n<p>这条命令的作用是进入 <em>/etc/mysql</em> 文件夹。</p>\n\n<p>然后输入：</p>\n\n<pre><code>vi my.cnf  \n</code></pre>\n\n<p>这条命令的作用是用 <code>Vim</code> 编辑器打开 <em>/etc/mysql</em> 目录下的 my.cnf 文件，然后就可以在终端对文件进行修改了。就像下面这样的界面：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-37-09.png\" alt=\"\" /></p>\n\n<p>将光标定位到 <code>[mysqld]</code> 位置，按 <strong>\"i\"</strong> ，这时可以修改了，添加如下设置：</p>\n\n<pre><code>[mysqld]\ncollation-server = utf8_unicode_ci  \ninit-connect='SET NAMES utf8'  \ncharacter-set-server = utf8  \n</code></pre>\n\n<p>修改完成之后，先按 <code>esc</code> ,然后输入 <code>:wq</code> ,退出编辑状态。</p>\n\n<p>为了确保设置成功，我们检查一下：</p>\n\n<ul>\n<li>重启 MySQL 服务：<code>service mysql restart</code>\n<li>进入 MySQL 命令行界面：<code>mysql -uroot -p</code>，输入之前你自己设置的MySQL密码。</li>\n<li>输入指令： <code>show variables like 'char%';</code>  输出是否如下所示： </li>\n</ul>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-48-16.png\" alt=\"\" /></p>\n\n<ul>\n<li>再输入指令：<code>show variables like 'collation%';</code> 检查一下结果：</li>\n</ul>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-49-14.png\" alt=\"\" /></p>\n\n<p>如果是上面的结果，恭喜你，搞定 MySQL 了！！！</p>\n<p>最后输入<code>exit;</code>可以退出MySQL</p>\n<hr />\n\n<h1 id=\"3ghost\">3. 安装Ghost</h1>\n\n<h3 id=\"31\">3.1 创建数据库</h3>\n\n<p>我们希望 Ghost 搭配 MySQL 数据库运行，因此需要为 Ghost 创建一个 MySQL 数据库。前面已经安装好 MySQL 了，现在我们就来创建数据库吧：</p>\n\n<pre><code>mysql -uroot -p -e 'create database ghost;'  \n</code></pre>\n\n<p>系统会提示你输入 MySQL 数据库的 <code>root</code> 账户密码（还记得前一章节安装 MySQL 时设置的密码吗？）。指令执行之后就创建了一个叫做 <code>ghost</code> 的数据库，将来，你的文章就是存在这里喽！</p>\n\n<h3 id=\"32nginx\">3.2  配置Nginx</h3>\n\n<p>我们希望利用 Nginx 做 Ghost 的前端代理服务。OK， 输入下面命令进入 <em>/etc/nginx/sites-available/</em> 目录：</p>\n\n<p><code>cd /etc/nginx/sites-available/</code></p>\n\n<p>然后输入下面指令：</p>\n\n<pre><code>  \nsudo vi default \n</code></pre>\n\n<p>还记得 <code>vi</code> 指令的作用吗？最后一条指令的作用是 vim 编辑器打开 default 文件进行编辑。我们修改如下内容：</p>\n\n<pre><code>server {  \n    listen 80;\n    server_name kittenyang.com *.kittenyang.com 115.28.223.69; //替换为你自己的域名！\n\n    location / {\n        proxy_set_header   X-Real-IP $remote_addr;\n        proxy_set_header   Host      $http_host;\n        proxy_pass         http://127.0.0.1:2368;\n    }\n}\n</code></pre>\n\n<p>完成之后按<code>esc</code> <code>:wq</code> 退出编辑。</p>\n\n<p>默认 default 文件已经链接到 <em>/etc/nginx/sites-enabled/</em>  目录下：</p>\n\n<pre><code>sudo ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default  \n</code></pre>\n\n<h3 id=\"33forever\">3.3  安装forever</h3>\n\n<p>如果是通过 <code>npm start</code> 启动 Ghost 的话，只要你关闭了远程连接，Ghost 也就停了，这个我们当然不希望喽。幸好，有 <code>forever</code> 工具帮我们解决这个问题。接下来执行以下指令来安装 <code>forever</code> ：</p>\n\n<pre><code>sudo npm install forever -g  \n</code></pre>\n\n<h3 id=\"34ghost\">3.4  Ghost,走你！</h3>\n\n<h4 id=\"341ghost\">3.4.1  下载Ghost</h4>\n\n<p>Ghost 安装包是经过压缩的，在 Linux 上我们需要用 <code>curl</code> 命令下载和用 <code>unzip</code> 工具对其解压，因此，首先要安装 <code>curl</code> 和 <code>unzip</code> 工具：  </p>\n\n<pre><code>sudo apt-get install curl libcurl3 libcurl3-dev php5-curl\nsudo apt-get install unzip\n</code></pre>\n\n<p>接下来我们下载 Ghost 安装包：</p>\n\n<pre><code>cd /srv/  \nsudo curl -L http://dl.ghostchina.com/Ghost-0.6.3-zh-full.zip -o ghost.zip  \n</code></pre>\n\n<blockquote>\n  <p>上面命令中网址的版本号可以根据<a href = \"http://ghostchina.com\" target = \"_blank\">ghostchina.com</a> 上的稳定版本修改，我写这篇文章的最新版本是<em>0.7.0</em>但是不够稳定，所以我输入的是<em>0.6.3-zh-full</em>。</p>\n</blockquote>\n\n<p>将其解压缩：</p>\n\n<pre><code>sudo unzip ghost.zip -d ghost  \n</code></pre>\n\n<p>现在，<code>/srv/ghost/</code> 目录下面就是我们的 Ghost 系统了！</p>\n\n<h4 id=\"342ghost\">3.4.2  修改Ghost配置文件</h4>\n\n<p>我们进入 Ghost 系统目录，为 Ghost 增加配置文件并配置数据库：</p>\n\n<pre><code>cd /srv/ghost/  \nsudo cp config.example.js config.js  \nsudo vi config.js  \n</code></pre>\n\n<p>最后一条指令是用 vim 打开 config.js 文件进行编辑。我们只修改 <code>production</code> 一节的配置信息，修改为如下形式（注意按照你自己的实际情况替换！）：</p>\n\n<pre><code>// ### Production\n    // When running Ghost in the wild, use the production environment\n    // Configure your URL and mail settings here\n    production: {\n        url: 'http://ghostchina.com', //替换为你自己的域名。\n        mail: {},\n        database: {\n            updateCheck: false,\n            client: 'mysql',\n            connection: {\n                host     : '127.0.0.1',\n                user     : 'root', //我们暂且用 MySQL 的 root 账户\n                password : '123456', //输入你的 MySQL 密码\n                database : 'ghost', //我们前面为 Ghost 创建的数据库名称\n                charset  : 'utf8'\n            }\n        },\n        server: {\n            // Host to be passed to node's `net.Server#listen()`\n            host: '127.0.0.1',\n            // Port to be passed to node's `net.Server#listen()`, for iisnode set this to `process.env.PORT`\n            port: '2368'\n        }\n    },\n</code></pre>\n\n<p>完成之后按<code>esc</code> <code>:wq</code> 退出编辑。</p>\n\n<h4 id=\"343ghost\">3.4.3  安装 Ghost 依赖库</h4>\n\n<p>打开 Ghost 系统的目录下面的 <code>package.json</code> 文件，将 <code>\"sqlite3\": \"2.2.0\"</code>, 这一行删除掉（注意，你看到的 sqlite 版本可能会不一样，但是，只要是 <code>sqlite3</code> 字样，删除即可）。</p>\n\n<p>接下来，进入存放 Ghost 系统的目录并安装 Ghost 所依赖的 <code>npm</code> 包：</p>\n\n<pre><code>sudo npm install --production  \n</code></pre>\n</p>我用<em>0.7.0</em>的版本这个地方会报错，所以前面提到我用的是<em>0.6.3-zh-full</em>版本。</p>\n\n<p>很快，所有依赖包就安装好了，当前目录下会多出一个 <code>node_modules</code> 目录。</p>\n\n<h4 id=\"343ghost\">3.4.3  启动 Ghost</h4>\n\n<p>执行如下指令重启 Nginx、启动 Ghost：</p>\n\n<pre><code>sudo service nginx restart  \ncd /srv/ghost  \nsudo NODE_ENV=production forever start index.js  \n</code></pre>\n\n<p>OK,至此，所有的操作都做完了。现在打开浏览器并输入你的域名看看吧！</p>\n\n<hr />\n\n<h1 id=\"qa\">Q&amp;A:</h1>\n\n<h4 id=\"q1\">Q1. 主页显示很慢,界面很久才展示出来.</h4>\n\n<p>A:还是因为google被墙了，需要删除三处引用了谷歌字体的地方。<em>/core/server/views</em> 下的两个<code>default.hbs</code> 和 <code>user-error.hbs</code> 以及主题目录<code>content/themes/你的主题/default.hbs</code>中的:  </p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400\" /&gt;  \n</code></pre>\n\n<h4 id=\"q2servicenginxrestartnginx\">Q2. service nginx restart 重启Nginx失败.</h4>\n\n<p>A:原因在于你已经把端口映射的配置写进<code>default</code>这个默认的配置文件了，但是你又写了一份同样的配置到<code>ghost.conf</code>,结果这两个配置同时生效，重启时冲突了。所以你应该：</p>\n\n<p>输入以下命令：<code>/etc/nginx/sites-available# rm -rf ghost.conf</code>.</p>\n\n<p>检查：<code>/etc/nginx/sites-available# ls</code></p>\n\n<p>应该就只会显示：<code>default</code></p>\n\n<p>然后 <code>service nginx restart</code>重启Nginx 就行了 重启成功了。</p>\n\n<h4 id=\"q3npmstartghostghostweb302\">Q3. npm start ghost 正常运行以后，访问ghost， 无法进入后台，web端显示的状态码为302.</h4>\n\n<p>A:进入ghost 后台系统会自动检测更新，是否有新版本,但是国内无法访问这个地址 <em>update.ghost.org</em>. <br />\n所以你应该在<code>config.js</code>中加入<code>updateCheck: false</code>, 看起来像这样：</p>\n\n<pre><code>development: {  \n       updateCheck: false,\n        database: {\n            client: 'mysql',\n            connection: {\n                host     : '127.0.0.1',\n                ......\n</code></pre>\n\n<h4 id=\"q4\">Q4. 如何备份现有的文件？</h4>\n\n<p>A:<code>cp /srv/ghost /srv/ghost_bak</code> <br />\n这样就可以把原来的文件备份到<code>ghost_bak</code>文件夹.</p>\n\n<h4 id=\"q5\">Q5. 如何备份数据库？</h4>\n\n<p>A:先按<code>cd /srv</code> 进入<code>/srv</code>目录,再<code>mysqldump -uroot -p你的密码 ghost &gt; ghost.sql</code> <br />\n这样就会把你的数据库内容备份到<code>srv</code>目录的<code>ghost.sql</code>这个文件里.</p>\n\n<hr />\n\n<blockquote>\n  <h4 id=\"\">引用自<a href=\"http://kittenyang.com/myfirstblog/\" target=\"_blank\">[Kitten's 时间胶囊]</a> </h4>\n</blockquote>","html":"<blockquote>  \n  <p>这是本博客的第一篇文章，我决定用来记录这个网站的诞生过程(即如何在阿里云服务器ECS_Ubuntu系统上安装Ghost博客)。一来可以把这个难忘的建站经历记录下来，二来也可以总结一些成功的经验供未来通过搜索引擎找到这儿的网友一些帮助。文章比较细，遇到你熟悉的部分可以跳过不看。嗯，开始吧。。。</p>\n</blockquote>  \n\n<hr />  \n\n<h1 id=\"1\">1. 购买域名</h1>\n\n<p>域名就是网址。比如我这个网站的域名就是  <code>daddyliu.com</code> 。<a href=\"http://www.godaddy.com\" target=\"_blank\">Godaddy</a> 是全球最大的域名供应商，所以我在Godaddy(网友亲切称其为“狗爹”)购买了域名。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-11-41-53.png\"\" /></p>  \n\n<p>首页中大大的输入框(<em>Enter a domain name</em>)里面就可以输入你想要注册的域名，然后godaddy会告诉你这个有没有被注册。如果被注册了，godaddy会建议你使用其他后缀名比如<code>.net</code> <code>.org</code> <code>.me</code> ...</p>\n\n<h4 id=\"tips\"><em>*tips:</em></h4>\n\n<blockquote>  \n  <p><em>Godaddy可以使用支付宝支付，只要把顶部货币栏切换到CNY即可。</em></p>\n</blockquote>\n\n<p>购买完成之后，进入你的 <strong>My Account</strong>，点击<strong>Domains</strong>，点击<strong>Launch</strong>.</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-12-02-26.png\" alt=\"\" /></p>\n\n<p>然后你会进入到域名的配置页面。在这里我们需要把域名和我们的服务器绑定起来。其实很简单，就一句话，把域名绑定到服务器的<code>IP地址</code>即可。这个过程，就是传说中的<strong>解析</strong>。</p>\n\n<p>怎么解析呢？  \n请看下图：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-18-02-40.png\" alt=\"\" /></p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-18-03-25.png\" alt=\"\" /></p>\n\n<p>点击编辑，在 <strong>Points to</strong> 一栏中填入服务器的IP地址即可。这里的 <strong>Host</strong> 其实就是前缀。这里普及两个名词: <strong>顶级域名</strong> 和 <strong>二级域名</strong> 。我们平常所知道的所谓的so-called正确网址是<code>www.XXX.xxx</code>。其实不然，  \n我们只要输入<code>XXX.xxx</code>就可以了，不需要输入前面的www。www只是一个前缀。<code>www.XXX.xxx</code>就是一个<strong>二级域名</strong>，类似的还有<code>mail.qq.com</code>、<code>open.weibo.com</code> 等。而<strong>顶级域名</strong>就是<code>XXX.xxx</code> ，比如<code>baidu.com</code>、<code>qq.com</code>。所以我们在解析的时候第一栏的<strong>Host Name</strong>就只是个前缀。<strong>顶级域名</strong>一般用<code>@</code>表示。</p>\n\n<p>域名配置好了，接下来我们就要去配置服务器(本文以阿里云服务器为例)了。</p>\n\n<p>由于笔者用的是Mac，所以我只能用Mac上的方法来写这篇博文。但Windows用户也不用害怕，流程是对的，只是有些环节的手段不太一样。如果遇到不懂的，请善用搜索引擎，俗称<strong>黄金法则</strong>。</p>\n\n<hr />\n\n<h1 id=\"2\">2. 配置服务器</h1>\n\n<p>首先启动<strong>终端terminal</strong>（Mac上开启一个文件或者一个应用的最快方法：control + 空格，呼出spotlight，输入想要的文件或应用的名称，如terminal，回车）。</p>\n\n<p>输入命令行：<code>ssh root@你的IP地址</code>  ，回车。输入服务器密码。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-15-29-45.png\" alt=\"\" /></p>\n\n<p>这段命令的作用是请求连接服务器。出现如下界面表示连接成功。</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-15-31-13.png\" alt=\"\" /></p>\n\n<h3 id=\"21nodejs\">2.1 安装Node.js</h3>\n\n<p>依次执行以下指令：</p>\n\n<pre><code>sudo apt-get update  \nsudo apt-get install -y python-software-properties python g++ make  \nsudo apt-get install software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js  \nsudo apt-get update  \nsudo apt-get install nodejs  \n</code></pre>\n\n<p>确认是否安装成功:</p>\n\n<pre><code>node -v  \n</code></pre>\n\n<pre><code>v0.10.37  \n</code></pre>\n\n<pre><code>npm -v  \n</code></pre>\n\n<pre><code>1.4.28  \n</code></pre>\n\n<h3 id=\"22nginx\">2.2 安装Nginx</h3>\n\n<p>执行以下指令：</p>\n\n<pre><code>sudo apt-get install nginx  \n</code></pre>\n\n<h3 id=\"23mysql\">2.3 安装MySQL</h3>\n\n<p>Ghost 默认采用 Sqlite3 数据库，但是我还是建议用 MySQL，避免将来由于数据多、访问量多而导致性能下降。</p>\n\n<p>执行如下指令开始安装 MySQL 吧：</p>\n\n<pre><code>sudo apt-get install mysql-server mysql-client  \n</code></pre>\n\n<p>安装过程中，系统会提示你给 <code>root</code> 用户（这里的 root 是 MySQL 数据库的管理账号） 设置个密码，建议设置的复杂些，更加安全些。如下图：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-27-05.png\" alt=\"\" /></p>\n\n<p>MySQL 安装成功后，我们执行以下指令进一步加强 MySQL 的安全设置：  </p>\n\n<pre><code>sudo mysql_secure_installation  \n</code></pre>\n\n<p>此工具所做的增强安全设置包括：移除所有匿名账户、限制远程 root 账户登录、删除 test 数据库等。下面列出详细设置：</p>\n\n<pre><code>NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL  \n      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!\n\nIn order to log into MySQL to secure it, we'll need the current  \npassword for the root user.  If you've just installed MySQL, and  \nyou haven't set the root password yet, the password will be blank,  \nso you should just press enter here.\n\n//输入安装 MySQL 时为 root 账户设置的密码\nEnter current password for root (enter for none):  \nOK, successfully used password, moving on...\n\nSetting the root password ensures that nobody can log into the MySQL  \nroot user without the proper authorisation.\n\nYou already have a root password set, so you can safely answer 'n'.\n\n//是否修改 root 账户的密码？前面设置过 root 账户的密码了，如果不打算修改密码的话，输入 'n'\nChange the root password? [Y/n] n  \n ... skipping.\n\nBy default, a MySQL installation has an anonymous user, allowing anyone  \nto log into MySQL without having to have a user account created for  \nthem.  This is intended only for testing, and to make the installation  \ngo a bit smoother.  You should remove them before moving into a  \nproduction environment.\n\n//是否删除匿名用户？\nRemove anonymous users? [Y/n] y  \n ... Success!\n\nNormally, root should only be allowed to connect from 'localhost'.  This  \nensures that someone cannot guess at the root password from the network.\n\n//是否禁止 root 账户远程登录？\nDisallow root login remotely? [Y/n] y  \n ... Success!\n\nBy default, MySQL comes with a database named 'test' that anyone can  \naccess.  This is also intended only for testing, and should be removed  \nbefore moving into a production environment.\n\n//是否删除 MySQL 默认创建的 test 数据库，并删除所有对 test 数据库的权限设置？\nRemove test database and access to it? [Y/n] y  \n - Dropping test database...\n ... Success!\n - Removing privileges on test database...\n ... Success!\n\nReloading the privilege tables will ensure that all changes made so far  \nwill take effect immediately.\n\n//是否重新加载权限表？\nReload privilege tables now? [Y/n] y  \n ... Success!\n\nCleaning up...\n\n\n\nAll done!  If you've completed all of the above steps, your MySQL  \ninstallation should now be secure.\n\nThanks for using MySQL!  \n</code></pre>\n\n<p>OK！MySQL 到此就安装好了！</p>\n\n<p>下面，我们为为 MySQL 设置默认字符集。将数据库、htnl页面、源码文件都设置为统一的字符集会减少很多麻烦，当然，utf8 是最好的选择。</p>\n\n<p>执行如下命令：</p>\n\n<pre><code>cd /etc/mysql  \n</code></pre>\n\n<p>这条命令的作用是进入 <em>/etc/mysql</em> 文件夹。</p>\n\n<p>然后输入：</p>\n\n<pre><code>vi my.cnf  \n</code></pre>\n\n<p>这条命令的作用是用 <code>Vim</code> 编辑器打开 <em>/etc/mysql</em> 目录下的 my.cnf 文件，然后就可以在终端对文件进行修改了。就像下面这样的界面：</p>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-37-09.png\" alt=\"\" /></p>\n\n<p>将光标定位到 <code>[mysqld]</code> 位置，按 <strong>\"i\"</strong> ，这时可以修改了，添加如下设置：</p>\n\n<pre><code>[mysqld]\ncollation-server = utf8_unicode_ci  \ninit-connect='SET NAMES utf8'  \ncharacter-set-server = utf8  \n</code></pre>\n\n<p>修改完成之后，先按 <code>esc</code> ,然后输入 <code>:wq</code> ,退出编辑状态。</p>\n\n<p>为了确保设置成功，我们检查一下：</p>\n\n<ul>  \n<li>重启 MySQL 服务：<code>service mysql restart</code>  \n<li>进入 MySQL 命令行界面：<code>mysql -uroot -p</code>，输入之前你自己设置的MySQL密码。</li>  \n<li>输入指令： <code>show variables like 'char%';</code>  输出是否如下所示： </li>  \n</ul>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-48-16.png\" alt=\"\" /></p>\n\n<ul>  \n<li>再输入指令：<code>show variables like 'collation%';</code> 检查一下结果：</li>  \n</ul>\n\n<p><img src=\"http://kittenyang.com/content/images/2014/Aug/-----2014-08-22-16-49-14.png\" alt=\"\" /></p>\n\n<p>如果是上面的结果，恭喜你，搞定 MySQL 了！！！</p>  \n\n<p>最后输入<code>exit;</code>可以退出MySQL</p>  \n\n<hr />\n\n<h1 id=\"3ghost\">3. 安装Ghost</h1>\n\n<h3 id=\"31\">3.1 创建数据库</h3>\n\n<p>我们希望 Ghost 搭配 MySQL 数据库运行，因此需要为 Ghost 创建一个 MySQL 数据库。前面已经安装好 MySQL 了，现在我们就来创建数据库吧：</p>\n\n<pre><code>mysql -uroot -p -e 'create database ghost;'  \n</code></pre>\n\n<p>系统会提示你输入 MySQL 数据库的 <code>root</code> 账户密码（还记得前一章节安装 MySQL 时设置的密码吗？）。指令执行之后就创建了一个叫做 <code>ghost</code> 的数据库，将来，你的文章就是存在这里喽！</p>\n\n<h3 id=\"32nginx\">3.2  配置Nginx</h3>\n\n<p>我们希望利用 Nginx 做 Ghost 的前端代理服务。OK， 输入下面命令进入 <em>/etc/nginx/sites-available/</em> 目录：</p>\n\n<p><code>cd /etc/nginx/sites-available/</code></p>\n\n<p>然后输入下面指令：</p>\n\n<pre><code>  \nsudo vi default \n</code></pre>\n\n<p>还记得 <code>vi</code> 指令的作用吗？最后一条指令的作用是 vim 编辑器打开 default 文件进行编辑。我们修改如下内容：</p>\n\n<pre><code>server {  \n    listen 80;\n    server_name kittenyang.com *.kittenyang.com 115.28.223.69; //替换为你自己的域名！\n\n    location / {\n        proxy_set_header   X-Real-IP $remote_addr;\n        proxy_set_header   Host      $http_host;\n        proxy_pass         http://127.0.0.1:2368;\n    }\n}\n</code></pre>\n\n<p>完成之后按<code>esc</code> <code>:wq</code> 退出编辑。</p>\n\n<p>默认 default 文件已经链接到 <em>/etc/nginx/sites-enabled/</em>  目录下：</p>\n\n<pre><code>sudo ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default  \n</code></pre>\n\n<h3 id=\"33forever\">3.3  安装forever</h3>\n\n<p>如果是通过 <code>npm start</code> 启动 Ghost 的话，只要你关闭了远程连接，Ghost 也就停了，这个我们当然不希望喽。幸好，有 <code>forever</code> 工具帮我们解决这个问题。接下来执行以下指令来安装 <code>forever</code> ：</p>\n\n<pre><code>sudo npm install forever -g  \n</code></pre>\n\n<h3 id=\"34ghost\">3.4  Ghost,走你！</h3>\n\n<h4 id=\"341ghost\">3.4.1  下载Ghost</h4>\n\n<p>Ghost 安装包是经过压缩的，在 Linux 上我们需要用 <code>curl</code> 命令下载和用 <code>unzip</code> 工具对其解压，因此，首先要安装 <code>curl</code> 和 <code>unzip</code> 工具：  </p>\n\n<pre><code>sudo apt-get install curl libcurl3 libcurl3-dev php5-curl\nsudo apt-get install unzip\n</code></pre>\n\n<p>接下来我们下载 Ghost 安装包：</p>\n\n<pre><code>cd /srv/  \nsudo curl -L http://dl.ghostchina.com/Ghost-0.6.3-zh-full.zip -o ghost.zip  \n</code></pre>\n\n<blockquote>  \n  <p>上面命令中网址的版本号可以根据<a href = \"http://ghostchina.com\" target = \"_blank\">ghostchina.com</a> 上的稳定版本修改，我写这篇文章的最新版本是<em>0.7.0</em>但是不够稳定，所以我输入的是<em>0.6.3-zh-full</em>。</p>\n</blockquote>\n\n<p>将其解压缩：</p>\n\n<pre><code>sudo unzip ghost.zip -d ghost  \n</code></pre>\n\n<p>现在，<code>/srv/ghost/</code> 目录下面就是我们的 Ghost 系统了！</p>\n\n<h4 id=\"342ghost\">3.4.2  修改Ghost配置文件</h4>\n\n<p>我们进入 Ghost 系统目录，为 Ghost 增加配置文件并配置数据库：</p>\n\n<pre><code>cd /srv/ghost/  \nsudo cp config.example.js config.js  \nsudo vi config.js  \n</code></pre>\n\n<p>最后一条指令是用 vim 打开 config.js 文件进行编辑。我们只修改 <code>production</code> 一节的配置信息，修改为如下形式（注意按照你自己的实际情况替换！）：</p>\n\n<pre><code>// ### Production\n    // When running Ghost in the wild, use the production environment\n    // Configure your URL and mail settings here\n    production: {\n        url: 'http://ghostchina.com', //替换为你自己的域名。\n        mail: {},\n        database: {\n            updateCheck: false,\n            client: 'mysql',\n            connection: {\n                host     : '127.0.0.1',\n                user     : 'root', //我们暂且用 MySQL 的 root 账户\n                password : '123456', //输入你的 MySQL 密码\n                database : 'ghost', //我们前面为 Ghost 创建的数据库名称\n                charset  : 'utf8'\n            }\n        },\n        server: {\n            // Host to be passed to node's `net.Server#listen()`\n            host: '127.0.0.1',\n            // Port to be passed to node's `net.Server#listen()`, for iisnode set this to `process.env.PORT`\n            port: '2368'\n        }\n    },\n</code></pre>\n\n<p>完成之后按<code>esc</code> <code>:wq</code> 退出编辑。</p>\n\n<h4 id=\"343ghost\">3.4.3  安装 Ghost 依赖库</h4>\n\n<p>打开 Ghost 系统的目录下面的 <code>package.json</code> 文件，将 <code>\"sqlite3\": \"2.2.0\"</code>, 这一行删除掉（注意，你看到的 sqlite 版本可能会不一样，但是，只要是 <code>sqlite3</code> 字样，删除即可）。</p>\n\n<p>接下来，进入存放 Ghost 系统的目录并安装 Ghost 所依赖的 <code>npm</code> 包：</p>\n\n<pre><code>sudo npm install --production  \n</code></pre>\n\n<p></p>我用<em>0.7.0</em>的版本这个地方会报错，所以前面提到我用的是<em>0.6.3-zh-full</em>版本。</p></p>\n\n<p>很快，所有依赖包就安装好了，当前目录下会多出一个 <code>node_modules</code> 目录。</p>\n\n<h4 id=\"343ghost\">3.4.3  启动 Ghost</h4>\n\n<p>执行如下指令重启 Nginx、启动 Ghost：</p>\n\n<pre><code>sudo service nginx restart  \ncd /srv/ghost  \nsudo NODE_ENV=production forever start index.js  \n</code></pre>\n\n<p>OK,至此，所有的操作都做完了。现在打开浏览器并输入你的域名看看吧！</p>\n\n<hr />\n\n<h1 id=\"qa\">Q&amp;A:</h1>\n\n<h4 id=\"q1\">Q1. 主页显示很慢,界面很久才展示出来.</h4>\n\n<p>A:还是因为google被墙了，需要删除三处引用了谷歌字体的地方。<em>/core/server/views</em> 下的两个<code>default.hbs</code> 和 <code>user-error.hbs</code> 以及主题目录<code>content/themes/你的主题/default.hbs</code>中的:  </p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400\" /&gt;  \n</code></pre>\n\n<h4 id=\"q2servicenginxrestartnginx\">Q2. service nginx restart 重启Nginx失败.</h4>\n\n<p>A:原因在于你已经把端口映射的配置写进<code>default</code>这个默认的配置文件了，但是你又写了一份同样的配置到<code>ghost.conf</code>,结果这两个配置同时生效，重启时冲突了。所以你应该：</p>\n\n<p>输入以下命令：<code>/etc/nginx/sites-available# rm -rf ghost.conf</code>.</p>\n\n<p>检查：<code>/etc/nginx/sites-available# ls</code></p>\n\n<p>应该就只会显示：<code>default</code></p>\n\n<p>然后 <code>service nginx restart</code>重启Nginx 就行了 重启成功了。</p>\n\n<h4 id=\"q3npmstartghostghostweb302\">Q3. npm start ghost 正常运行以后，访问ghost， 无法进入后台，web端显示的状态码为302.</h4>\n\n<p>A:进入ghost 后台系统会自动检测更新，是否有新版本,但是国内无法访问这个地址 <em>update.ghost.org</em>. <br />  \n所以你应该在<code>config.js</code>中加入<code>updateCheck: false</code>, 看起来像这样：</p>\n\n<pre><code>development: {  \n       updateCheck: false,\n        database: {\n            client: 'mysql',\n            connection: {\n                host     : '127.0.0.1',\n                ......\n</code></pre>\n\n<h4 id=\"q4\">Q4. 如何备份现有的文件？</h4>\n\n<p>A:<code>cp /srv/ghost /srv/ghost_bak</code> <br />  \n这样就可以把原来的文件备份到<code>ghost_bak</code>文件夹.</p>\n\n<h4 id=\"q5\">Q5. 如何备份数据库？</h4>\n\n<p>A:先按<code>cd /srv</code> 进入<code>/srv</code>目录,再<code>mysqldump -uroot -p你的密码 ghost &gt; ghost.sql</code> <br />  \n这样就会把你的数据库内容备份到<code>srv</code>目录的<code>ghost.sql</code>这个文件里.</p>\n\n<hr />\n\n<blockquote>  \n  <h4 id=\"\">引用自<a href=\"http://kittenyang.com/myfirstblog/\" target=\"_blank\">[Kitten's 时间胶囊]</a> </h4>\n</blockquote>","image":"","featured":0,"page":0,"status":"published","language":"zh_CN","meta_title":null,"meta_description":null,"author_id":1,"created_at":"2015-10-14T10:29:45.000Z","created_by":1,"updated_at":"2015-10-15T16:17:55.000Z","updated_by":1,"published_at":"2015-10-14T11:45:27.000Z","published_by":1},{"id":3,"uuid":"54540f6d-b2a2-4bc2-baa6-0da09c7bc443","title":"(Untitled)","slug":"untitled","markdown":"1684pple2015","html":"<p>1684pple2015</p>","image":null,"featured":0,"page":0,"status":"draft","language":"zh_CN","meta_title":null,"meta_description":null,"author_id":1,"created_at":"2015-10-17T04:44:00.000Z","created_by":1,"updated_at":"2015-10-17T04:44:04.000Z","updated_by":1,"published_at":null,"published_by":null}],"posts_tags":[{"id":1,"post_id":1,"tag_id":1}],"roles":[{"id":1,"uuid":"5b56fb7b-ea0d-4374-8be9-fb031c1c3af8","name":"Administrator","description":"管理员","created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":2,"uuid":"43676c59-a5c6-4616-ad83-041a29b8bb0f","name":"Editor","description":"编辑","created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":3,"uuid":"22bf93a4-ba48-41b6-813c-89ca8939b1d6","name":"Author","description":"作者","created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1},{"id":4,"uuid":"59f701b3-f623-4d8e-9ebf-70c5e5839b3b","name":"Owner","description":"博客所有者","created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1}],"roles_users":[{"id":1,"role_id":4,"user_id":1}],"settings":[{"id":1,"uuid":"e34ed7c0-b81f-49a6-9253-43ac7b0ca11d","key":"databaseVersion","value":"003","type":"core","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-14T10:22:07.000Z","updated_by":1},{"id":2,"uuid":"4f7daac9-a5e4-4a25-9126-844559fedc87","key":"dbHash","value":"6ee88487-27de-4157-a788-6aeb10544eaa","type":"core","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-14T10:22:07.000Z","updated_by":1},{"id":3,"uuid":"91649823-bf16-4a18-92fd-931536f967f8","key":"nextUpdateCheck","value":"1445262810","type":"core","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-18T13:53:30.000Z","updated_by":1},{"id":4,"uuid":"e7e5aaae-5448-4dd2-96bf-48da78d3a263","key":"displayUpdateNotification","value":"0.7.0","type":"core","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-18T13:53:30.000Z","updated_by":1},{"id":5,"uuid":"6fe81ed5-8290-4b86-af68-f7ef267b07eb","key":"title","value":"刘爸爸","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":6,"uuid":"65b9e675-e45f-4c5a-b361-8f57030455af","key":"description","value":"Thoughts, stories and ideas.","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":7,"uuid":"f5e757d6-f4fd-46cf-adab-aa4f28372b67","key":"email","value":"eskyhero@qq.com","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":8,"uuid":"2f78b0e0-7ebe-4b67-b985-bf33305e40c9","key":"logo","value":"","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":9,"uuid":"fbac8b79-1498-4704-a225-f2f87cbf1124","key":"cover","value":"","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":10,"uuid":"3a5fb9d0-e8fe-4e0e-ba66-687f20640730","key":"defaultLang","value":"zh_CN","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":11,"uuid":"6b935a4d-7843-47b9-bb23-80928263a498","key":"postsPerPage","value":"5","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":12,"uuid":"8acc4dd7-bc7c-4bca-89d4-139733c48077","key":"forceI18n","value":"true","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":13,"uuid":"abe09fb1-9cfc-41e3-a92e-8fd77643d158","key":"permalinks","value":"/:slug/","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":14,"uuid":"946528c4-dcf3-43b2-897e-842d721374b3","key":"ghost_head","value":"","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":15,"uuid":"08bd5cf3-8e3f-4a67-babf-fda198494f76","key":"ghost_foot","value":"","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":16,"uuid":"be7f8009-574a-46bd-b27d-a8f866fad220","key":"labs","value":"{}","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":17,"uuid":"e25ae8f2-a347-4851-b9a9-9806fee85753","key":"navigation","value":"[{\"label\":\"首页\", \"url\":\"/\"}]","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":18,"uuid":"be3356ac-0eb0-4aab-aeb2-ca2fb95ead57","key":"isPrivate","value":"false","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":19,"uuid":"d08ebf2a-bfc8-4e6d-8c32-5367cf225cfe","key":"password","value":"","type":"blog","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1},{"id":20,"uuid":"9ba4141b-e7e4-4bc2-b413-a151a5a9b8ea","key":"activeApps","value":"[]","type":"app","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-14T10:22:07.000Z","updated_by":1},{"id":21,"uuid":"fe7769e3-fa5a-4272-afbc-1855bf08bdd7","key":"installedApps","value":"[]","type":"app","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:55:16.000Z","updated_by":1},{"id":22,"uuid":"c3dbfa1d-b80a-409f-bb99-f8077357bbd5","key":"activeTheme","value":"vno","type":"theme","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:56:15.000Z","updated_by":1}],"tags":[{"id":1,"uuid":"4d27b390-e41a-4e0c-a4a5-d8ecaf195013","name":"系统简介","slug":"getting-started","description":null,"image":null,"hidden":0,"parent_id":null,"meta_title":null,"meta_description":null,"created_at":"2015-10-14T10:22:04.000Z","created_by":1,"updated_at":"2015-10-14T10:22:04.000Z","updated_by":1}],"users":[{"id":1,"uuid":"6f8a3ee6-fdfe-4433-810f-d017009616ee","name":"eskyhero","slug":"eskyhero","password":"$2a$10$DpCvL7yFzXKUGVMoBubn6eTfTbnMfjbfxb/O3FKaOG5BuItWgt.bW","email":"eskyhero@qq.com","image":null,"cover":null,"bio":null,"website":null,"location":null,"accessibility":null,"status":"active","language":"zh_CN","meta_title":null,"meta_description":null,"last_login":"2015-10-19T02:55:26.000Z","created_at":"2015-10-14T10:22:07.000Z","created_by":1,"updated_at":"2015-10-19T02:55:26.000Z","updated_by":1}]}}